<div class="col-md-4">
  <h2>Cambiar Contraseña</h2>

  <% if @user.password_alteration == 0 %>
    <h3>Si no cambio la contrase&ntilde;a por defecto que se le asignó, debe hacerlo para poder utilizar el sistema</h3>
  <% end %>

  <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
      <%= devise_error_message! %>

      <!--<div class="field">-->
        <%# f.label :login %><br />
        <%# f.text_field :login, autofocus: true, class: 'form-control' %>
      <!--</div>-->


      <div class="field">
        <label>Nueva contrase&ntilde;a</label> <i class="fa fa-asterisk"></i> <% if @user.password_alteration %><br /> <% end %>
        <%= f.password_field :password, autocomplete: "off", class: 'form-control' %>
      </div><br>

      <div class="field">
        <label>Confirmar nueva contrase&ntilde;a</label> <i class="fa fa-asterisk"></i><br />
        <%= f.password_field :password_confirmation, autocomplete: "off", class: 'form-control' %>
      </div><br>

      <div class="field">
        <label>Contrase&ntilde;a actual</label> <i class="fa fa-asterisk"></i> <i>(Se necesita la contrase&ntilde;a actual para confirmar el cambio)</i><br />
        <%= f.password_field :current_password, autocomplete: "off", class: 'form-control' %>
      </div><br>

      <div class="panel panel-danger" id="error-div" style="display: none">
        <div class="panel-heading">
          La nueva contraseña debe ser distinta a la antigua
        </div>
      </div>

      <br>
      <div class="actions">
        <%= f.submit 'Confirmar', class: 'btn btn-default', id: 'submit-edition' %>
      </div>
  <% end %>
  <script>
    $('#submit-edition').on('click', function(event){
        var userPassword = document.getElementById('user_password');
        var currentPassword = document.getElementById('user_current_password');
        if( userPassword.value == currentPassword.value && userPassword.value != ""){
            event.preventDefault();
            $('#error-div').css({"display": "block"});
        }
    });
  </script>

  <!--<h3>Cancel my account</h3>-->

  <!--<p>Unhappy? <%# button_to "Cancel my account", registration_path(resource_name), data: { confirm: "Are you sure?" }, method: :delete %></p>-->

<%# link_to "Back", :back %>
</div>
